(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const d="341e682c586005efd50a82dbd9b94a06",l="https://api.themoviedb.org/3";async function g(){return(await(await fetch(`${l}/trending/movie/week?api_key=${d}`)).json()).results}async function h(e){return(await(await fetch(`${l}/search/movie?api_key=${d}&query=${encodeURIComponent(e)}`)).json()).results}async function v(){return(await(await fetch(`${l}/genre/movie/list?api_key=${d}`)).json()).genres}async function w(e){return(await(await fetch(`${l}/discover/movie?api_key=${d}&with_genres=${e}`)).json()).results}const $="AIzaSyCKeGrxOrJHl7ZVPxYjogTMyYrGQgW33bc";async function I(e){var s;const r=(s=(await(await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(e+" official trailer")}&key=${$}&maxResults=1`)).json()).items)==null?void 0:s[0];return r?`https://www.youtube.com/embed/${r.id.videoId}`:null}const f="movieNightFavorites";function u(){const e=localStorage.getItem(f);return e?JSON.parse(e):[]}function E(e){const t=u();t.find(n=>n.id===e.id)||(t.push(e),localStorage.setItem(f,JSON.stringify(t)))}function b(e){const t=u().filter(n=>n.id!==e);localStorage.setItem(f,JSON.stringify(t))}function p(e){return u().some(t=>t.id===e)}function L(e,t){t.innerHTML=e.map(n=>`<button data-genre-id="${n.id}">${n.name}</button>`).join("")}function i(e,t){t.innerHTML="",e.forEach(n=>{var a;const r=document.createElement("div");r.classList.add("movie-card");const s=p(n.id),o=`<button class="fav-btn" data-id="${n.id}">${s?"‚ù§Ô∏è":"ü§ç"}</button>`;r.innerHTML=`
      <img src="https://image.tmdb.org/t/p/w300${n.poster_path}" alt="${n.title}" />
      <h4>${n.title}</h4>
      <p>‚≠ê ${n.vote_average}</p>
      ${o}
    `,(a=r.querySelector(".fav-btn"))==null||a.addEventListener("click",y=>{y.stopPropagation(),p(n.id)?b(n.id):E(n),i(e,t)}),r.addEventListener("click",()=>{_(n,document.getElementById("movieDetails"))}),t.appendChild(r)})}async function _(e,t){const n=await I(e.title);t.innerHTML=`
    <h2>${e.title}</h2>
    <p>${e.overview}</p>
    <p><strong>Release:</strong> ${e.release_date}</p>
    <p><strong>Rating:</strong> ‚≠ê ${e.vote_average}</p>
    ${n?`<iframe width="100%" height="315" src="${n}" frameborder="0" allowfullscreen></iframe>`:"<p>Trailer not available.</p>"}
  `}const c=document.getElementById("movieList"),m=document.getElementById("genreFilter"),B=document.getElementById("searchInput");async function M(){const e=await g(),t=await v();i(e,c),L(t,m)}B.addEventListener("input",async e=>{const t=e.target.value.trim();if(t.length>2){const n=await h(t);i(n,c)}});m.addEventListener("click",async e=>{const t=e.target.closest("button");if(t!=null&&t.dataset.genreId){const n=t.dataset.genreId,r=await w(n);i(r,c)}});document.getElementById("homeBtn").addEventListener("click",async()=>{const e=await g();i(e,c)});document.getElementById("favoritesBtn").addEventListener("click",()=>{const e=u();i(e,c)});M();
